#!/usr/bin/expect -f
#

source $srcdir/mdb.exp

set file $srcdir/TestManagedTypes.cs
mdb_start "TestManagedTypes.exe"
mdb_expect_frame 0 "X.Main()" $file 218
mdb_send "break 120"
set breakpoint [mdb_expect_breakpoint]
mdb_send "continue"
mdb_expect_stopped 0 "X.Simple()" $file 120
mdb_send "dump -mode object a"
mdb_expect "object:True:-1:System.Int32:True:4:Fundamental System.Int32"
mdb_send "ptype a"
mdb_expect "System.Int32"
mdb_send "print a"
mdb_expect "5"
mdb_send "dump -mode object b"
mdb_expect "object:True:-1:System.Int64:True:8:Fundamental System.Int64"
mdb_send "ptype b"
mdb_expect "System.Int64"
mdb_send "print b"
mdb_expect "7"
mdb_send "dump -mode object f"
mdb_expect "object:True:-1:System.Single:True:4:Fundamental System.Single"
mdb_send "ptype f"
mdb_expect "System.Single"
mdb_send "print f"
mdb_expect "0.7142857"
mdb_send "dump -mode object hello"
mdb_expect "object:True:22:System.String:False:16:Fundamental System.String"
mdb_send "ptype hello"
mdb_expect "System.String"
mdb_send "print hello"
mdb_expect {"Hello World"}
